@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject IJSRuntime jsRuntime
@inject RoleService RoleSvc
<!-- Nav Item - Pages Collapse Menu -->
<li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
       aria-expanded="true" aria-controls="collapseTwo">
        <i class="fas fa-fw fa-cog"></i>
        <span>Umum</span>
    </a>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
        <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">Sering Diakses:</h6>
            <a class="collapse-item" href="/master/jamaah">Data Jamaah</a>
            <a class="collapse-item" href="/master/pengumuman">Data Pengumuman</a>
            <a class="collapse-item" href="/master/tim">Data Pengurus DKM</a>
            <a class="collapse-item" href="/daftar-nasehat">Data Penasehat</a>
            <a class="collapse-item" href="/master/InfoMasjid">Data Masjid</a>
            <a class="collapse-item" href="/master/KalenderKelompok">Kalender Kegiatan</a>
            <a class="collapse-item" href="/program-jamaah">Capaian Jamaah</a>
            <a class="collapse-item" href="/master/dokumen">Penyimpanan Dokumen</a>
            <a class="collapse-item" href="/master/program-capaian-jamaah">Program Jamaah</a>
            <a class="collapse-item" href="/master/cctv">CCTV</a>
        </div>
    </div>
</li>
@if (HasLogin)
{
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu99"
       aria-expanded="true" aria-controls="menu99">
            <i class="fas fa-fw fa-money-check"></i>
            <span>Faroid</span>
        </a>
        <div id="menu99" class="collapse" aria-labelledby="headingmenu99"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/waris">Kalkulator Waris</a>

            </div>
        </div>
    </li>
    <!-- Nav Item - Utilities Collapse Menu -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu1"
       aria-expanded="true" aria-controls="menu1">
            <i class="fas fa-fw fa-info"></i>
            <span>Qurban</span>
        </a>
        <div id="menu1" class="collapse" aria-labelledby="headingmenu1"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/data-qurban">Data Qurban</a>
                <a class="collapse-item" href="/checklist-qurban">Checklist Qurban</a>
                <a class="collapse-item" href="/master/InfoQurban">Acara Qurban</a>
                <a class="collapse-item" href="/master/CashflowQurban">Cashflow Qurban</a>
                @*<a class="collapse-item" href="/report-qurban">Laporan Qurban</a>*@
            </div>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu2"
       aria-expanded="true" aria-controls="menu2">
            <i class="fas fa-fw fa-quran"></i>
            <span>Ramadan</span>
        </a>
        <div id="menu2" class="collapse" aria-labelledby="headingmenu2"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/master/muzaki">Daftar Muzaki</a>
                <a class="collapse-item" href="/master/mustahik">Daftar Mustahik</a>
                <a class="collapse-item" href="/data-zakat">Pembagian Zakat Fitrah 1</a>
                <a class="collapse-item" href="/data-zakat2">Pembagian Zakat Fitrah 2</a>
                <a class="collapse-item" href="/master/HargaBerasZakat">Harga Beras Zakat</a>
                <a class="collapse-item" href="/pembagian-zakat-mal">Pembagian Zakat Mal</a>
                @*<a class="collapse-item" href="/report-zakat-fitrah">Laporan Zakat Fitrah</a>*@
            </div>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu3"
       aria-expanded="true" aria-controls="menu3">
            <i class="fas fa-fw fa-table"></i>
            <span>Database</span>
        </a>
        <div id="menu3" class="collapse" aria-labelledby="headingmenu3"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/master/UserProfile">Master User</a>
                <a class="collapse-item" href="/master-Ngaji">Master Acara</a>
                <a class="collapse-item" href="/master/nasehat">Daftar Khutbah</a>
                <a class="collapse-item" href="/master/pengurus">Master Pengurus DKM</a>

                <a class="collapse-item" href="/daftar-absensi">Daftar Hadir</a>
                <a class="collapse-item" href="/master/rapat">Hasil Rapat</a>
                <a class="collapse-item" href="/master/aset">Aset Masjid</a>
                @*<a class="collapse-item" href="/report/kehadiran">Laporan Kehadiran</a>*@
                @*<a class="collapse-item" href="/report/pengurus">Laporan Evaluasi Pengurus</a>*@
            </div>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu4"
       aria-expanded="true" aria-controls="menu4">
            <i class="fas fa-fw fa-file"></i>
            <span>Sodakoh</span>
        </a>
        <div id="menu4" class="collapse" aria-labelledby="headingmenu4"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/master/sodakoh">Data Info Sodakoh</a>
                <a class="collapse-item" href="/master/buktitransfer">Bukti Transfer (KU)</a>

            </div>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu5"
       aria-expanded="true" aria-controls="menu5">
            <i class="fas fa-fw fa-sms"></i>
            <span>Sistem</span>
        </a>
        <div id="menu5" class="collapse" aria-labelledby="headingmenu5"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Pilih:</h6>
                <a class="collapse-item" href="/master/SmsBroadcast">Sms Broadcast</a>
                <a class="collapse-item" href="/master/video-stream">Video Stream</a>
                <a class="collapse-item" href="/master/MosqueAlarm">Alarm Masjid</a>
            </div>
        </div>
    </li>
    @if (MyRole == Roles.Keuangan)
    {
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu6"
       aria-expanded="true" aria-controls="menu6">
                <i class="fas fa-fw fa-envelope"></i>
                <span>Keuangan</span>
            </a>
            <div id="menu6" class="collapse" aria-labelledby="headingmenu6"
         data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Pilih:</h6>
                    <a class="collapse-item" href="/index/ku">Aplikasi KU</a>
                </div>
            </div>
        </li>
    }

    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#menu7"
       aria-expanded="true" aria-controls="menu7">
            <i class="fas fa-fw fa-percentage"></i>
            <span>Evaluasi Pengurus DKM</span>
        </a>
        <div id="menu7" class="collapse" aria-labelledby="headingmenu7"
         data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h7 class="collapse-header">Pilih:</h7>
                <a class="collapse-item" href="/master/kpi">Data KPI</a>
                <a class="collapse-item" href="/master/kpibatch">Batch Evaluasi</a>
                <a class="collapse-item" href="/master/KPIScoreHeader">Evaluasi Kinerja</a>
                @*<a class="collapse-item" href="/report/kpi">Laporan Kompetensi</a>*@
            </div>
        </div>
    </li>
}

@code {
    Roles MyRole = Roles.User;
    bool collapseNavMenu = true;
    bool HasLogin = true;
    string NavMenuCssClass => (collapseNavMenu ? "collapse" : "");
    string UserName { set; get; }
    void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var user = (await authenticationStateTask).User;
        UserName = user.Identity.Name;
        MyRole = RoleSvc.GetRole(UserName);
        if (MyRole == Roles.Admin || MyRole == Roles.Keuangan)
        {
            HasLogin = true;
            StateHasChanged();
        }
        else
        {
            HasLogin = false;
            StateHasChanged();
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
       

        //await jsRuntime.InvokeAsync<object>("setMenuStyle");
    }
}
